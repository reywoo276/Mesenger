{"ast":null,"code":"import SockJS from 'sockjs-client';\nimport { CompatClient, Stomp } from '@stomp/stompjs';\nlet stompClient = null;\nexport function connect(userId, onMessageReceived) {\n  const socket = new SockJS('http://localhost:8080/ws');\n  stompClient = Stomp.over(socket);\n  stompClient.connect({}, () => {\n    stompClient.subscribe(`/user/${userId}/queue/messages`, message => {\n      onMessageReceived(JSON.parse(message.body));\n    });\n  });\n}\nexport function sendMessage(msg) {\n  if (stompClient && stompClient.connected) {\n    stompClient.send('/app/chat', {}, JSON.stringify(msg));\n  }\n}","map":{"version":3,"names":["SockJS","CompatClient","Stomp","stompClient","connect","userId","onMessageReceived","socket","over","subscribe","message","JSON","parse","body","sendMessage","msg","connected","send","stringify"],"sources":["C:/Users/ludmi/IdeaProjects/Mesenger/src/main/resources/static/src/socket.js"],"sourcesContent":["import SockJS from 'sockjs-client';\r\nimport { CompatClient, Stomp } from '@stomp/stompjs';\r\n\r\nlet stompClient = null;\r\n\r\nexport function connect(userId, onMessageReceived) {\r\n    const socket = new SockJS('http://localhost:8080/ws');\r\n    stompClient = Stomp.over(socket);\r\n\r\n    stompClient.connect({}, () => {\r\n        stompClient.subscribe(`/user/${userId}/queue/messages`, (message) => {\r\n            onMessageReceived(JSON.parse(message.body));\r\n        });\r\n    });\r\n}\r\n\r\nexport function sendMessage(msg) {\r\n    if (stompClient && stompClient.connected) {\r\n        stompClient.send('/app/chat', {}, JSON.stringify(msg));\r\n    }\r\n}\r\n"],"mappings":"AAAA,OAAOA,MAAM,MAAM,eAAe;AAClC,SAASC,YAAY,EAAEC,KAAK,QAAQ,gBAAgB;AAEpD,IAAIC,WAAW,GAAG,IAAI;AAEtB,OAAO,SAASC,OAAOA,CAACC,MAAM,EAAEC,iBAAiB,EAAE;EAC/C,MAAMC,MAAM,GAAG,IAAIP,MAAM,CAAC,0BAA0B,CAAC;EACrDG,WAAW,GAAGD,KAAK,CAACM,IAAI,CAACD,MAAM,CAAC;EAEhCJ,WAAW,CAACC,OAAO,CAAC,CAAC,CAAC,EAAE,MAAM;IAC1BD,WAAW,CAACM,SAAS,CAAC,SAASJ,MAAM,iBAAiB,EAAGK,OAAO,IAAK;MACjEJ,iBAAiB,CAACK,IAAI,CAACC,KAAK,CAACF,OAAO,CAACG,IAAI,CAAC,CAAC;IAC/C,CAAC,CAAC;EACN,CAAC,CAAC;AACN;AAEA,OAAO,SAASC,WAAWA,CAACC,GAAG,EAAE;EAC7B,IAAIZ,WAAW,IAAIA,WAAW,CAACa,SAAS,EAAE;IACtCb,WAAW,CAACc,IAAI,CAAC,WAAW,EAAE,CAAC,CAAC,EAAEN,IAAI,CAACO,SAAS,CAACH,GAAG,CAAC,CAAC;EAC1D;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}