{"ast":null,"code":"// src/api.js\nexport const apiUrl = \"http://localhost:8080\";\nexport async function signIn(username, password) {\n  const response = await fetch(`${apiUrl}/auth/sign-in`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    credentials: \"include\",\n    // для передачи и получения cookie\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n  if (!response.ok) {\n    throw new Error(\"Неверный логин или пароль\");\n  }\n  return response.json();\n}\nexport async function getMe() {\n  const response = await fetch(`${apiUrl}/me`, {\n    credentials: \"include\" // важен для cookie\n  });\n  if (!response.ok) {\n    throw new Error(\"Unauthorized\");\n  }\n  return response.json();\n}","map":{"version":3,"names":["apiUrl","signIn","username","password","response","fetch","method","headers","credentials","body","JSON","stringify","ok","Error","json","getMe"],"sources":["C:/Users/ludmi/IdeaProjects/Mesenger/src/main/resources/static/src/api.js"],"sourcesContent":["// src/api.js\r\nexport const apiUrl = \"http://localhost:8080\";\r\n\r\nexport async function signIn(username, password) {\r\n    const response = await fetch(`${apiUrl}/auth/sign-in`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        credentials: \"include\", // для передачи и получения cookie\r\n        body: JSON.stringify({ username, password }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error(\"Неверный логин или пароль\");\r\n    }\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function getMe() {\r\n    const response = await fetch(`${apiUrl}/me`, {\r\n        credentials: \"include\", // важен для cookie\r\n    });\r\n\r\n    if (!response.ok) {\r\n        throw new Error(\"Unauthorized\");\r\n    }\r\n\r\n    return response.json();\r\n}\r\n"],"mappings":"AAAA;AACA,OAAO,MAAMA,MAAM,GAAG,uBAAuB;AAE7C,OAAO,eAAeC,MAAMA,CAACC,QAAQ,EAAEC,QAAQ,EAAE;EAC7C,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGL,MAAM,eAAe,EAAE;IACnDM,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MAAE,cAAc,EAAE;IAAmB,CAAC;IAC/CC,WAAW,EAAE,SAAS;IAAE;IACxBC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MAAET,QAAQ;MAAEC;IAAS,CAAC;EAC/C,CAAC,CAAC;EAEF,IAAI,CAACC,QAAQ,CAACQ,EAAE,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,2BAA2B,CAAC;EAChD;EAEA,OAAOT,QAAQ,CAACU,IAAI,CAAC,CAAC;AAC1B;AAEA,OAAO,eAAeC,KAAKA,CAAA,EAAG;EAC1B,MAAMX,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGL,MAAM,KAAK,EAAE;IACzCQ,WAAW,EAAE,SAAS,CAAE;EAC5B,CAAC,CAAC;EAEF,IAAI,CAACJ,QAAQ,CAACQ,EAAE,EAAE;IACd,MAAM,IAAIC,KAAK,CAAC,cAAc,CAAC;EACnC;EAEA,OAAOT,QAAQ,CAACU,IAAI,CAAC,CAAC;AAC1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}