{"ast":null,"code":"const BASE_URL = \"http://localhost:8080\";\nconst request = options => {\n  const headers = new Headers();\n  if (options.setContentType !== false) {\n    headers.append(\"Content-Type\", \"application/json\");\n  }\n  const accessToken = localStorage.getItem(\"accessToken\");\n  if (accessToken) {\n    headers.append(\"Authorization\", \"Bearer \" + accessToken);\n  }\n  const defaults = {\n    headers: headers\n  };\n  options = Object.assign({}, defaults, options);\n  return fetch(options.url, options).then(response => response.json().then(json => {\n    if (!response.ok) {\n      return Promise.reject(json);\n    }\n    return json;\n  }));\n};\nexport function login(signInRequest) {\n  return request({\n    url: BASE_URL + \"/auth/sign-in\",\n    method: \"POST\",\n    body: JSON.stringify(signInRequest)\n  });\n}\nexport function signup(signUpRequest) {\n  return request({\n    url: BASE_URL + \"/auth/sign-up\",\n    method: \"POST\",\n    body: JSON.stringify(signUpRequest)\n  });\n}\nexport function getCurrentUser() {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n  return request({\n    url: BASE_URL + \"/users/me\",\n    method: \"GET\"\n  });\n}\nexport function getUsers() {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n  return request({\n    url: BASE_URL + \"/users/summaries\",\n    method: \"GET\"\n  });\n}\nexport function countNewMessages(senderId, recipientId) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n  return request({\n    url: BASE_URL + `/messages/${senderId}/${recipientId}/count`,\n    method: \"GET\"\n  });\n}\nexport function findChatMessages(senderId, recipientId) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n  return request({\n    url: BASE_URL + `/messages/${senderId}/${recipientId}`,\n    method: \"GET\"\n  });\n}\nexport function findChatMessage(id) {\n  if (!localStorage.getItem(\"accessToken\")) {\n    return Promise.reject(\"No access token set.\");\n  }\n  return request({\n    url: BASE_URL + `/messages/${id}`,\n    method: \"GET\"\n  });\n}","map":{"version":3,"names":["BASE_URL","request","options","headers","Headers","setContentType","append","accessToken","localStorage","getItem","defaults","Object","assign","fetch","url","then","response","json","ok","Promise","reject","login","signInRequest","method","body","JSON","stringify","signup","signUpRequest","getCurrentUser","getUsers","countNewMessages","senderId","recipientId","findChatMessages","findChatMessage","id"],"sources":["C:/Users/ludmi/IdeaProjects/Mesenger/src/main/resources/static/src/util/ApiUtil.js"],"sourcesContent":["const BASE_URL = \"http://localhost:8080\";\r\n\r\nconst request = (options) => {\r\n    const headers = new Headers();\r\n\r\n    if (options.setContentType !== false) {\r\n        headers.append(\"Content-Type\", \"application/json\");\r\n    }\r\n\r\n    const accessToken = localStorage.getItem(\"accessToken\");\r\n    if (accessToken) {\r\n        headers.append(\"Authorization\", \"Bearer \" + accessToken);\r\n    }\r\n\r\n    const defaults = { headers: headers };\r\n    options = Object.assign({}, defaults, options);\r\n\r\n    return fetch(options.url, options).then((response) =>\r\n        response.json().then((json) => {\r\n            if (!response.ok) {\r\n                return Promise.reject(json);\r\n            }\r\n            return json;\r\n        })\r\n    );\r\n};\r\n\r\nexport function login(signInRequest) {\r\n    return request({\r\n        url: BASE_URL + \"/auth/sign-in\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(signInRequest),\r\n    });\r\n}\r\n\r\nexport function signup(signUpRequest) {\r\n    return request({\r\n        url: BASE_URL + \"/auth/sign-up\",\r\n        method: \"POST\",\r\n        body: JSON.stringify(signUpRequest),\r\n    });\r\n}\r\n\r\nexport function getCurrentUser() {\r\n    if (!localStorage.getItem(\"accessToken\")) {\r\n        return Promise.reject(\"No access token set.\");\r\n    }\r\n\r\n    return request({\r\n        url: BASE_URL + \"/users/me\",\r\n        method: \"GET\",\r\n    });\r\n}\r\n\r\nexport function getUsers() {\r\n    if (!localStorage.getItem(\"accessToken\")) {\r\n        return Promise.reject(\"No access token set.\");\r\n    }\r\n\r\n    return request({\r\n        url: BASE_URL + \"/users/summaries\",\r\n        method: \"GET\",\r\n    });\r\n}\r\n\r\nexport function countNewMessages(senderId, recipientId) {\r\n    if (!localStorage.getItem(\"accessToken\")) {\r\n        return Promise.reject(\"No access token set.\");\r\n    }\r\n\r\n    return request({\r\n        url: BASE_URL + `/messages/${senderId}/${recipientId}/count`,\r\n        method: \"GET\",\r\n    });\r\n}\r\n\r\nexport function findChatMessages(senderId, recipientId) {\r\n    if (!localStorage.getItem(\"accessToken\")) {\r\n        return Promise.reject(\"No access token set.\");\r\n    }\r\n\r\n    return request({\r\n        url: BASE_URL + `/messages/${senderId}/${recipientId}`,\r\n        method: \"GET\",\r\n    });\r\n}\r\n\r\nexport function findChatMessage(id) {\r\n    if (!localStorage.getItem(\"accessToken\")) {\r\n        return Promise.reject(\"No access token set.\");\r\n    }\r\n\r\n    return request({\r\n        url: BASE_URL + `/messages/${id}`,\r\n        method: \"GET\",\r\n    });\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}